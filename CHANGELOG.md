# 更新日志

本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)。

---

## [0.5.0] - 2025-12-09

### 新增
- **动态占位符功能** - 话术支持 `{key}` 占位符，点击后弹出表单填写动态内容
  - 支持 `label` 中文标签显示
  - 支持 `default` 默认值
  - 支持 `required` 必填验证
  - 支持 `maxLength` 长度限制
  - 自动转义特殊字符（`{}`、`^0-^9`）防止注入
- `PlaceholderModal.vue` - 占位符输入表单弹窗组件
- `web/src/utils/placeholder.ts` - 占位符处理工具函数
- 判罚公告话术示例（带占位符）

### 优化
- 话术列表中占位符显示为中文标签 `[嫌疑人名称]` 而非 `{name}`
- 弹窗预览实时显示填写内容
- ESC 键优先关闭弹窗，不关闭主面板

### 变更
- 服务端 `IsValidQuote` 支持模板匹配验证

---

## [0.4.0] - 2025-12-08

### 新增
- **FiveM 颜色代码支持** - 话术文本自动解析 `^0` 到 `^9` 颜色代码并预览
  - `^0`/`^7` 白色 (自适应主题)
  - `^1` 红色 (#F44336)
  - `^2` 绿色 (#4CAF50)
  - `^3` 黄色 (#FFEB3B)
  - `^4` 蓝色 (#42A5F5)
  - `^5` 浅蓝 (#03A9F4)
  - `^6` 紫色 (#9C27B0)
  - `^8` 橙色 (#FF5722)
  - `^9` 灰色 (#9E9E9E)

### 修复
- 单职业模式下主题切换按钮丢失问题
  - 现在主题切换按钮会显示在 Header 区域（关闭按钮旁）

---

## [0.3.0] - 2025-12-07

### 新增
- `Config.ShowCurrentJobOnly` - 控制只显示当前职业话术或全部职业
- `Config.Notify()` - 双端通用通知函数
- 玩家加载初始化线程，确保职业数据正确获取

### 优化
- 单职业模式下自动隐藏侧边栏
- 职业变更时自动刷新或关闭面板

### 修复
- 发布包 `web/dist` 目录结构
- ESX 改为全局变量，修复 `Config.Notify` 调用时的 nil 错误

---

## [0.2.0] - 2025-12-07

### 新增
- **完整的 FiveM 资源系统**
- `fxmanifest.lua` 资源清单
- `shared/config.lua` 全局配置
- `client/main.lua` 客户端核心
  - F6 热键打开/关闭面板
  - NUI 焦点管理
  - ESX 职业检测
- `server/main.lua` 服务端核心
  - 消息广播
  - 安全验证
- 职业话术数据
  - `jobs/police.lua` 警察话术
  - `jobs/ambulance.lua` 医生话术
  - `jobs/mechanic.lua` 机械师话术
- **NUI 前端 (Vue 3)**
- Vue 3 + TypeScript + Vite 技术栈
- 可折叠侧边栏导航
- 职业切换与分类展开
- 实时搜索过滤
- 深色/浅色主题切换
- Iconify 图标库
- **开源标准化**
- GitHub Actions CI/CD 自动构建发布
- Issue Forms 模板
- PR 模板
- 贡献指南

---

## 版本说明

- **主版本号**: 不兼容的 API 变更
- **次版本号**: 向后兼容的功能新增
- **修订号**: 向后兼容的问题修复

### 标记说明

- `新增` - 新功能
- `变更` - 现有功能的变更
- `弃用` - 即将移除的功能
- `移除` - 已移除的功能
- `修复` - Bug 修复
- `安全` - 安全相关修复
